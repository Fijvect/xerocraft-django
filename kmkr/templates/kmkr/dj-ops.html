<!DOCTYPE html>

{% load staticfiles %}

<html lang="en" style="overflow-y: scroll;">
<head>
    <meta charset="UTF-8">
    <title>Track Logger</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto Condensed">

    <!-- MDL -->
    <link href='https://fonts.googleapis.com/css?family=Roboto:400,300,500|Roboto+Mono|Roboto+Condensed:400,700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.min.css" />

    <style>

        .unselectable {
           -moz-user-select: -moz-none;
           -khtml-user-select: none;
           -webkit-user-select: none;
           -ms-user-select: none;
           user-select: none;
        }

        body {
            margin:0;
            padding:0;
            background-color:#f8f8f8;
            overflow-y: hidden;
            font-size:24pt;
        }


    div.mdl-textfield textarea {
        margin-top: 11px;
        font-size: 20pt;
        line-height: 1;
        font-family: Roboto Condensed, Arial, Helvetica;
        border-bottom: none;

    }
    div.mdl-textfield textarea + label:after {
        display: none;
    }

        .mdl-chip { margin: 5px; padding: 20px; font-size:16pt; background-color: rgba(0,0,0,.12);}

        /* Tweeks to radio button list */
        .mdl-radio {font-size: smaller;}
        .mdl-radio__label { margin-left: 10px; }
        .mdl-radio__outer-circle { width:25px; height:25px; top:0; left:0; }
        .mdl-radio__inner-circle {
            width:13px; height:13px; top:6px; left:6px; margin:0; padding:0;
            /* transition-duration: 0s;  /* Necessary because kiosk app on tablet doesn't do transitions right. */
        }

        /* Tweeks to checkbox list */
        .mdl-checkbox__label {font-size: smaller; margin-left: 10px;}
        .mdl-checkbox__box-outline { width:24px; height:24px; margin-top:-3px }
        .mdl-checkbox__focus-helper { width:40px; height:40px; top:-7px; left:-7px;}
        .mdl-checkbox__tick-outline {
            /* transition-duration: 0s;  /* Necessary because kiosk app on tablet doesn't do transitions right. */
        }


    </style>
</head>
<body class="unselectable">

    <div id="myContainer"></div>

    <script src="{% static 'members/js.cookie.js' %}"></script>  <!-- TODO: members? -->
    <script src="{% static 'kmkr/DjOps.min.js' %}"></script>
    <script>

        // KIOSK ID
        var uniqueKioskId = "";
        try {
            uniqueKioskId = Android.getUniqueIdentifier();
        }
        catch(err) {
            // This ID only authenticates within the test environment.
            // The "test kiosk" is a regular browser (not the kiosk app) so we need to provide a fake ID.
            uniqueKioskId = "testkiosk"
        }

        // CSRF TOKEN
        var csrfToken = Cookies.get('csrftoken');
        if (csrfToken == null) {
            // Have noted situations in which Django seems to have not sent the token.
            // Will try reloading in these situations.
            document.location.reload(true)
        }

        var xisRestFlags = {
            "authenticateUrl":        "{% url 'memb:api-authenticate' %}",
            "claimListUrl":           "{% url 'task:claim-list' %}",
            "discoveryMethodListUrl": "{% url 'memb:discoverymethod-list' %}",
            "emailMembershipInfoUrl": "{% url 'memb:email-mship-buy-info' %}",
            "logMessageUrl":          "/ops/log-message/",
            "memberListUrl":          "{% url 'memb:member-list' %}",
            "membershipListUrl":      "{% url 'memb:membership-list' %}",
            "playListUrl":            "{% url 'task:play-list' %}",
            "productListUrl":         "{% url 'soda:product-list' %}",
            "showListUrl":            "{% url 'kmkr:show-list' %}",
            "taskListUrl":            "{% url 'task:task-list' %}",
            "timeBlocksUrl":          "/ops/api/time_blocks/",
            "timeBlockTypesUrl":      "/ops/api/time_block_types/",
            "vendLogListUrl":         "{% url 'soda:vendlog-list' %}",
            "visitEventListUrl":      "{% url 'memb:visitevent-list' %}",
            "workListUrl":            "{% url 'task:work-list' %}",
            "workNoteListUrl":        "{% url 'task:worknote-list' %}"
        };

        var flags = {
            "csrfToken":    csrfToken,
            "xisRestFlags":  xisRestFlags
        };

        var myContainer = document.getElementById("myContainer");
        var app = Elm.DjOps.embed(myContainer, flags);


    </script>
</body>
</html>
